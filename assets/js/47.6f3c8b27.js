(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{252:function(t,s,a){"use strict";a.r(s);var n=a(6),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"intersectionobserver"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#intersectionobserver"}},[t._v("#")]),t._v(" IntersectionObserver")]),t._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#参数-callback-回调"}},[t._v("参数：callback 回调")]),s("ul",[s("li",[s("a",{attrs:{href:"#回调参数-intersectionobserverentry-对象"}},[t._v("回调参数 IntersectionObserverEntry 对象")]),s("ul",[s("li",[s("a",{attrs:{href:"#time-可见性发生变化的时间-是一个高精度时间戳-单位为毫秒"}},[t._v("time 可见性发生变化的时间，是一个高精度时间戳，单位为毫秒")])]),s("li",[s("a",{attrs:{href:"#target-被观察的目标元素-是一个-dom-节点对象"}},[t._v("target 被观察的目标元素，是一个 DOM 节点对象")])]),s("li",[s("a",{attrs:{href:"#rootbounds-根元素的视口范围矩形区域的-domrectreadonly-对象数据"}},[t._v("rootBounds 根元素的视口范围矩形区域的 DOMRectReadOnly 对象数据")])]),s("li",[s("a",{attrs:{href:"#boundingclientrect-目标元素自身的矩形区域的-domrectreadonly-对象数据"}},[t._v("boundingClientRect 目标元素自身的矩形区域的 DOMRectReadOnly 对象数据")])]),s("li",[s("a",{attrs:{href:"#intersectionrect-目标元素与视口的交叉重合区域的-domrectreadonly-对象数据"}},[t._v("intersectionRect 目标元素与视口的交叉重合区域的 DOMRectReadOnly 对象数据")])]),s("li",[s("a",{attrs:{href:"#intersectionratio-目标元素的可见比例"}},[t._v("intersectionRatio 目标元素的可见比例")])]),s("li",[s("a",{attrs:{href:"#isintersecting-目标元素是否与视口范围有相交部分"}},[t._v("isIntersecting 目标元素是否与视口范围有相交部分")])]),s("li",[s("a",{attrs:{href:"#isvisible-是否可见"}},[t._v("isVisible 是否可见")])])])]),s("li",[s("a",{attrs:{href:"#回调参数-observer-观察器实例对象"}},[t._v("回调参数：observer 观察器实例对象")])])])]),s("li",[s("a",{attrs:{href:"#参数-options-配置对象"}},[t._v("参数：options 配置对象")]),s("ul",[s("li",[s("a",{attrs:{href:"#root-指定要观察的目标元素以哪个元素为视口根元素"}},[t._v("root 指定要观察的目标元素以哪个元素为视口根元素")])]),s("li",[s("a",{attrs:{href:"#rootmargin-控制根元素-视口元素-视口矩形范围大小"}},[t._v("rootMargin 控制根元素（视口元素）视口矩形范围大小")])]),s("li",[s("a",{attrs:{href:"#threshold-设置-entry-intersectionratio-值经过哪些阈值时触发回调"}},[t._v("threshold 设置 entry.intersectionRatio 值经过哪些阈值时触发回调")])])])]),s("li",[s("a",{attrs:{href:"#返回值-observer-观察器实例对象"}},[t._v("返回值：observer 观察器实例对象")]),s("ul",[s("li",[s("a",{attrs:{href:"#属性"}},[t._v("属性")]),s("ul",[s("li",[s("a",{attrs:{href:"#root-指定的视口元素-未指定返回-null"}},[t._v("root 指定的视口元素，未指定返回 null")])]),s("li",[s("a",{attrs:{href:"#rootmargin-创建实例时设置的视口范围边距"}},[t._v("rootMargin 创建实例时设置的视口范围边距")])]),s("li",[s("a",{attrs:{href:"#thresholds-一个包含交叉阈值的列表-按升序排列-默认-0"}},[t._v("thresholds 一个包含交叉阈值的列表, 按升序排列，默认 [0]")])])])]),s("li",[s("a",{attrs:{href:"#方法"}},[t._v("方法")]),s("ul",[s("li",[s("a",{attrs:{href:"#disconnect-关闭观察器"}},[t._v("disconnect() 关闭观察器")])]),s("li",[s("a",{attrs:{href:"#observe-ele-htmlelement-监听一个-dom-元素-监听多个需多次调用"}},[t._v("observe(ele: HTMLElement) 监听一个 DOM 元素，监听多个需多次调用")])]),s("li",[s("a",{attrs:{href:"#takerecords-返回所有观察目标的-intersectionobserverentry-对象数组"}},[t._v("takeRecords() 返回所有观察目标的 IntersectionObserverEntry 对象数组")])]),s("li",[s("a",{attrs:{href:"#unobserve-ele-htmlelement-停止监听指定的-dom-元素"}},[t._v("unobserve(ele: HTMLElement) 停止监听指定的 DOM 元素")])])])])])]),s("li",[s("a",{attrs:{href:"#使用实例"}},[t._v("使用实例")]),s("ul",[s("li",[s("a",{attrs:{href:"#图片懒加载"}},[t._v("图片懒加载")])]),s("li",[s("a",{attrs:{href:"#页面触底加载-无限滚动"}},[t._v("页面触底加载（无限滚动）")])]),s("li",[s("a",{attrs:{href:"#视频自动播放"}},[t._v("视频自动播放")])])])])])]),s("p"),t._v(" "),s("p",[s("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/11/intersectionobserver_api.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("IntersectionObserver API 使用教程  (阮一峰/2016年11月3日)"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v('用于观察某个元素是否进入了"视口"（viewport），即用户能不能看到它。')]),t._v(" "),s("p",[t._v("传统的实现方法是，监听到 "),s("code",[t._v("scroll")]),t._v(" 事件后，调用目标元素的"),s("code",[t._v("getBoundingClientRect()")]),t._v(" 方法，得到它对应于视口左上角的坐标，再判断是否在视口之内。这种方法的缺点是，由于 "),s("code",[t._v("scroll")]),t._v(" 事件密集发生，计算量很大，容易造成性能问题。")]),t._v(" "),s("p",[t._v('目前有一个新的 IntersectionObserver API，可以自动"观察"元素是否可见，Chrome 51+ 已经支持。由于可见（visible）的本质是，目标元素与视口产生一个交叉区（重合部分），所以这个 API 叫做“交叉观察器”。')]),t._v(" "),s("p",[s("code",[t._v("IntersectionObserver")]),t._v(" 是浏览器原生提供的构造函数，构造出的实例可以用来观察一个 DOM 元素是否与视口有交叉区域，也就是是否在视口范围内可见。")]),t._v(" "),s("p",[s("code",[t._v("IntersectionObserver")]),t._v(" API 是异步的，不随着目标元素的滚动同步触发。")]),t._v(" "),s("p",[t._v("规格写明，"),s("code",[t._v("IntersectionObserver")]),t._v(" 的实现，应该采用 "),s("code",[t._v("requestIdleCallback()")]),t._v("，即只有线程空闲下来，才会执行观察器。这意味着，这个观察器的优先级非常低，只在其他任务执行完，浏览器有了空闲才会执行。")]),t._v(" "),s("p",[t._v("用法比较简单，构造函数接受两个参数，并返回一个观察器实例对象：")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" observer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IntersectionObserver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[s("code",[t._v("callback")]),t._v(" 是可见性变化时的回调函数")]),t._v(" "),s("li",[s("code",[t._v("options")]),t._v(" 可选参数，是配置对象")])]),t._v(" "),s("h2",{attrs:{id:"参数-callback-回调"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数-callback-回调"}},[t._v("#")]),t._v(" 参数："),s("code",[t._v("callback")]),t._v(" 回调")]),t._v(" "),s("p",[t._v("回调会被传入两个参数：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("entries")]),t._v(" 一个由 "),s("code",[t._v("IntersectionObserverEntry")]),t._v(" 对象组成的数组，当观察多个目标元素时则会有多个对象。")]),t._v(" "),s("li",[s("code",[t._v("observer")]),t._v(" 被调用的 "),s("code",[t._v("IntersectionObserver")]),t._v(" 实例。")])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("callback")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("entries"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ob")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("entries"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" observer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IntersectionObserver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("h3",{attrs:{id:"回调参数-intersectionobserverentry-对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#回调参数-intersectionobserverentry-对象"}},[t._v("#")]),t._v(" 回调参数 "),s("code",[t._v("IntersectionObserverEntry")]),t._v(" 对象")]),t._v(" "),s("p",[t._v("对象结构是这样的：")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("rootBounds")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" DOMRectReadOnly "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("width")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// DOMRect 的宽度。")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("height")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// DOMRect 的高度。")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("x")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// DOMRect 原点的 x 坐标。")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("y")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("299")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// DOMRect 原点的 y 坐标。")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("top")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("299")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回 DOMRect 的顶部坐标值（通常与 y 相同）。")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("right")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回 DOMRect 的右坐标值（通常与 x + width 相同）。")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("bottom")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("599")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回 DOMRect 的底部坐标值（通常与 y + height 相同）。")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("left")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回 DOMRect 的左坐标值（通常与 x​​​​​​​ 相同）。")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("boundingClientRect")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" DOMRectReadOnly "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("intersectionRect")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" DOMRectReadOnly "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("intersectionRatio")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("isIntersecting")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("isVisible")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("target")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" HTMLElement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("time")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("791.2299998570234")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br")])]),s("h4",{attrs:{id:"time-可见性发生变化的时间-是一个高精度时间戳-单位为毫秒"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#time-可见性发生变化的时间-是一个高精度时间戳-单位为毫秒"}},[t._v("#")]),t._v(" "),s("code",[t._v("time")]),t._v(" 可见性发生变化的时间，是一个高精度时间戳，单位为毫秒")]),t._v(" "),s("h4",{attrs:{id:"target-被观察的目标元素-是一个-dom-节点对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#target-被观察的目标元素-是一个-dom-节点对象"}},[t._v("#")]),t._v(" "),s("code",[t._v("target")]),t._v(" 被观察的目标元素，是一个 DOM 节点对象")]),t._v(" "),s("h4",{attrs:{id:"rootbounds-根元素的视口范围矩形区域的-domrectreadonly-对象数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rootbounds-根元素的视口范围矩形区域的-domrectreadonly-对象数据"}},[t._v("#")]),t._v(" "),s("code",[t._v("rootBounds")]),t._v(" 根元素的视口范围矩形区域的 "),s("code",[t._v("DOMRectReadOnly")]),t._v(" 对象数据")]),t._v(" "),s("p",[t._v("相当于对元素直接调用 "),s("code",[t._v("getBoundingClientRect()")]),t._v(" 方法返回的 "),s("code",[t._v("DOMRectReadOnly")]),t._v(" 对象数据，如果没有指定根元素（即直接相对于视口滚动），则返回 "),s("code",[t._v("null")])]),t._v(" "),s("p",[s("code",[t._v("DOMRectReadOnly")]),t._v(" 对象结构是这样的：")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("width")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// DOMRect 的宽度。")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("height")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// DOMRect 的高度。")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("x")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// DOMRect 原点的 x 坐标。")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("y")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("299")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// DOMRect 原点的 y 坐标。")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("top")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("299")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回 DOMRect 的顶部坐标值（通常与 y 相同）。")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("right")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回 DOMRect 的右坐标值（通常与 x + width 相同）。")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("bottom")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("599")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回 DOMRect 的底部坐标值（通常与 y + height 相同）。")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("left")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回 DOMRect 的左坐标值（通常与 x​​​​​​​ 相同）。")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("h4",{attrs:{id:"boundingclientrect-目标元素自身的矩形区域的-domrectreadonly-对象数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#boundingclientrect-目标元素自身的矩形区域的-domrectreadonly-对象数据"}},[t._v("#")]),t._v(" "),s("code",[t._v("boundingClientRect")]),t._v(" 目标元素自身的矩形区域的 "),s("code",[t._v("DOMRectReadOnly")]),t._v(" 对象数据")]),t._v(" "),s("h4",{attrs:{id:"intersectionrect-目标元素与视口的交叉重合区域的-domrectreadonly-对象数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#intersectionrect-目标元素与视口的交叉重合区域的-domrectreadonly-对象数据"}},[t._v("#")]),t._v(" "),s("code",[t._v("intersectionRect")]),t._v(" 目标元素与视口的交叉重合区域的 "),s("code",[t._v("DOMRectReadOnly")]),t._v(" 对象数据")]),t._v(" "),s("h4",{attrs:{id:"intersectionratio-目标元素的可见比例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#intersectionratio-目标元素的可见比例"}},[t._v("#")]),t._v(" "),s("code",[t._v("intersectionRatio")]),t._v(" 目标元素的可见比例")]),t._v(" "),s("p",[t._v("表明目标元素自身有百分之多少进入了视口范围，也就是 "),s("code",[t._v("intersectionRect")]),t._v(" 占 "),s("code",[t._v("boundingClientRect")]),t._v(" 的比例，完全可见时为 "),s("code",[t._v("1")]),t._v(" ，完全不可见时为 "),s("code",[t._v("0")])]),t._v(" "),s("h4",{attrs:{id:"isintersecting-目标元素是否与视口范围有相交部分"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#isintersecting-目标元素是否与视口范围有相交部分"}},[t._v("#")]),t._v(" "),s("code",[t._v("isIntersecting")]),t._v(" 目标元素是否与视口范围有相交部分")]),t._v(" "),s("p",[t._v("如果目标元素与视口范围有相交，则返回 "),s("code",[t._v("true")]),t._v("，同时也表示 "),s("code",[t._v("IntersectionObserverEntry")]),t._v(" 描述了从没有交叉到交叉的过程，如果返回 false, 那么可以由此判断，变换是从交叉状态到非交叉状态。")]),t._v(" "),s("h4",{attrs:{id:"isvisible-是否可见"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#isvisible-是否可见"}},[t._v("#")]),t._v(" "),s("code",[t._v("isVisible")]),t._v(" 是否可见")]),t._v(" "),s("h3",{attrs:{id:"回调参数-observer-观察器实例对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#回调参数-observer-观察器实例对象"}},[t._v("#")]),t._v(" 回调参数："),s("code",[t._v("observer")]),t._v(" 观察器实例对象")]),t._v(" "),s("p",[t._v("详见后文：返回值："),s("code",[t._v("observer")]),t._v(" 观察器实例对象")]),t._v(" "),s("h2",{attrs:{id:"参数-options-配置对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数-options-配置对象"}},[t._v("#")]),t._v(" 参数："),s("code",[t._v("options")]),t._v(" 配置对象")]),t._v(" "),s("p",[t._v("一个可以用来配置 "),s("code",[t._v("observer")]),t._v(" 实例的对象。如果 "),s("code",[t._v("options")]),t._v(" 未指定，observer实例默认使用文档视口作为root，并且没有 "),s("code",[t._v("margin")]),t._v("，阈值为 "),s("code",[t._v("0%")]),t._v("（意味着即使一像素的改变都会触发回调函数）。你可以指定以下配置：")]),t._v(" "),s("h3",{attrs:{id:"root-指定要观察的目标元素以哪个元素为视口根元素"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#root-指定要观察的目标元素以哪个元素为视口根元素"}},[t._v("#")]),t._v(" "),s("code",[t._v("root")]),t._v(" 指定要观察的目标元素以哪个元素为视口根元素")]),t._v(" "),s("p",[s("code",[t._v("type: HTMLElement")])]),t._v(" "),s("p",[s("code",[t._v("default: 屏幕视口")])]),t._v(" "),s("p",[t._v("指定一个 DOM 元素作为根元素（视口元素），也就是将这个元素当作视口，元素的边界作为视口的边界。")]),t._v(" "),s("p",[t._v("目标元素在 "),s("code",[t._v("root")]),t._v(" 元素的可见区域的的任何不可见部分都会被视为不可见。")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" observer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IntersectionObserver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("root")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.container'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("h3",{attrs:{id:"rootmargin-控制根元素-视口元素-视口矩形范围大小"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rootmargin-控制根元素-视口元素-视口矩形范围大小"}},[t._v("#")]),t._v(" "),s("code",[t._v("rootMargin")]),t._v(" 控制根元素（视口元素）视口矩形范围大小")]),t._v(" "),s("p",[s("code",[t._v("type: string")])]),t._v(" "),s("p",[s("code",[t._v("default: '0px 0px 0px 0px'")])]),t._v(" "),s("p",[t._v("注意：字符串值分别指定上右下左 margin，只能为像素值或百分比，"),s("code",[t._v("0")]),t._v(" 也必须带上单位 "),s("code",[t._v("0px")]),t._v("，正负值均可。")]),t._v(" "),s("p",[s("code",[t._v("rootMargin")]),t._v(" 设置根元素（视口元素）的四个方向外边距，它会扩展（正值）或缩小（负值） "),s("code",[t._v("rootBounds")]),t._v(" 这个视口矩形范围的大小，从而影响 "),s("code",[t._v("intersectionRect")]),t._v(" 交叉区域的大小。")]),t._v(" "),s("p",[t._v("假如指定一个 class 为 "),s("code",[t._v(".container")]),t._v(" 的元素为视口元素，他的宽高均为 "),s("code",[t._v("600px")]),t._v("，在未指定 "),s("code",[t._v("rootMargin")]),t._v(" 属性值时，观察器判断它里面的一个子元素是否在可视范围内时，依据的范围就是 "),s("code",[t._v("600px * 600px")]),t._v(" 这个范围。")]),t._v(" "),s("p",[t._v("但如果指定一个 "),s("code",[t._v("rootMargin")]),t._v(" 范围如下：")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" observer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IntersectionObserver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("root")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.container'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("rootMargin")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'300px 0px -200px 0px'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("上例指定了 "),s("code",[t._v("rootMargin")]),t._v(" 值为 "),s("code",[t._v("'300px 0px -200px 0px'")]),t._v("，则观察器的判定范围就发生了变化。")]),t._v(" "),s("p",[t._v("上边距设置了 "),s("code",[t._v("300px")]),t._v(" 则上方的判定范围就扩大了，也就是被观察的子元素从上方进入时，会比之前早 "),s("code",[t._v("300px")]),t._v(" 触发进入事件，从上方离开时则会晚 "),s("code",[t._v("300px")]),t._v(" 的距离触发离开事件。")]),t._v(" "),s("p",[t._v("而下边距设置了 "),s("code",[t._v("-200px")]),t._v(" 则下方的判定范围被缩小了，被观察的子元素从下方进入时，会比之前晚 "),s("code",[t._v("200px")]),t._v(" 的距离触发进入事件，从下方离开时则会早 "),s("code",[t._v("200px")]),t._v(" 的距离触发离开事件。")]),t._v(" "),s("h3",{attrs:{id:"threshold-设置-entry-intersectionratio-值经过哪些阈值时触发回调"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#threshold-设置-entry-intersectionratio-值经过哪些阈值时触发回调"}},[t._v("#")]),t._v(" "),s("code",[t._v("threshold")]),t._v(" 设置 "),s("code",[t._v("entry.intersectionRatio")]),t._v(" 值经过哪些阈值时触发回调")]),t._v(" "),s("p",[s("code",[t._v("type: Array<number>")])]),t._v(" "),s("p",[s("code",[t._v("default: [0]")])]),t._v(" "),s("p",[t._v("指定的每一个数表示 "),s("strong",[t._v("被观察元素有百分之多少在视口范围内时")]),t._v(" 触发回调的阈值，元素滚动时，自身在视口范围内的占比变化过程中，高于或低于这个值时则会触发回调函数。用 "),s("code",[t._v("0 ~ 1")]),t._v(" 之间的数表示元素自身有 "),s("code",[t._v("0% ~ 100%")]),t._v(" 在视口范围内。")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("[0]")]),t._v(" 只要进入一点点即触发一次，完全离开再触发一次")]),t._v(" "),s("li",[s("code",[t._v("[1]")]),t._v(" 完全进入才触发一次，只要离开一点点即会触发一次")]),t._v(" "),s("li",[s("code",[t._v("[0.5]")]),t._v(" 进入了一半触发一次，离开了一半触发一次")]),t._v(" "),s("li",[s("code",[t._v("[0, 0.5, 1]")]),t._v(" 刚进入/进入一半/完全进入时均会触发一次，刚离开/离开一半/完全离开时也会触发一次。")])]),t._v(" "),s("h2",{attrs:{id:"返回值-observer-观察器实例对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#返回值-observer-观察器实例对象"}},[t._v("#")]),t._v(" 返回值："),s("code",[t._v("observer")]),t._v(" 观察器实例对象")]),t._v(" "),s("p",[s("code",[t._v("type: IntersectionObserver")])]),t._v(" "),s("p",[t._v("当一个 "),s("code",[t._v("IntersectionObserver")]),t._v(" 对象被创建时，其被配置为监听视口元素中一段给定比例的可见区域。")]),t._v(" "),s("p",[t._v("一旦 "),s("code",[t._v("IntersectionObserver")]),t._v(" 被创建，则无法更改其配置，所以一个给定的观察者对象只能用来监听可见区域的特定变化值，可以在同一个观察者对象中配置监听多个目标元素。")]),t._v(" "),s("h3",{attrs:{id:"属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#属性"}},[t._v("#")]),t._v(" 属性")]),t._v(" "),s("h4",{attrs:{id:"root-指定的视口元素-未指定返回-null"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#root-指定的视口元素-未指定返回-null"}},[t._v("#")]),t._v(" "),s("code",[t._v("root")]),t._v(" 指定的视口元素，未指定返回 "),s("code",[t._v("null")])]),t._v(" "),s("h4",{attrs:{id:"rootmargin-创建实例时设置的视口范围边距"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rootmargin-创建实例时设置的视口范围边距"}},[t._v("#")]),t._v(" "),s("code",[t._v("rootMargin")]),t._v(" 创建实例时设置的视口范围边距")]),t._v(" "),s("p",[t._v("此属性返回的值可能与调用构造函数时指定的值不同，因此可能需要更改该值，以匹配内部要求。默认值为"),s("code",[t._v("'0px 0px 0px 0px'")]),t._v("。")]),t._v(" "),s("h4",{attrs:{id:"thresholds-一个包含交叉阈值的列表-按升序排列-默认-0"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#thresholds-一个包含交叉阈值的列表-按升序排列-默认-0"}},[t._v("#")]),t._v(" "),s("code",[t._v("thresholds")]),t._v(" 一个包含交叉阈值的列表, 按升序排列，默认 "),s("code",[t._v("[0]")])]),t._v(" "),s("h3",{attrs:{id:"方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方法"}},[t._v("#")]),t._v(" 方法")]),t._v(" "),s("h4",{attrs:{id:"disconnect-关闭观察器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#disconnect-关闭观察器"}},[t._v("#")]),t._v(" "),s("code",[t._v("disconnect()")]),t._v(" 关闭观察器")]),t._v(" "),s("h4",{attrs:{id:"observe-ele-htmlelement-监听一个-dom-元素-监听多个需多次调用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#observe-ele-htmlelement-监听一个-dom-元素-监听多个需多次调用"}},[t._v("#")]),t._v(" "),s("code",[t._v("observe(ele: HTMLElement)")]),t._v(" 监听一个 DOM 元素，监听多个需多次调用")]),t._v(" "),s("h4",{attrs:{id:"takerecords-返回所有观察目标的-intersectionobserverentry-对象数组"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#takerecords-返回所有观察目标的-intersectionobserverentry-对象数组"}},[t._v("#")]),t._v(" "),s("code",[t._v("takeRecords()")]),t._v(" 返回所有观察目标的 "),s("code",[t._v("IntersectionObserverEntry")]),t._v(" 对象数组")]),t._v(" "),s("p",[t._v("每个对象的目标元素都包含每次相交的信息, 可以显式通过调用此方法或隐式地通过观察者的回调自动调用。")]),t._v(" "),s("h4",{attrs:{id:"unobserve-ele-htmlelement-停止监听指定的-dom-元素"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#unobserve-ele-htmlelement-停止监听指定的-dom-元素"}},[t._v("#")]),t._v(" "),s("code",[t._v("unobserve(ele: HTMLElement)")]),t._v(" 停止监听指定的 DOM 元素")]),t._v(" "),s("h2",{attrs:{id:"使用实例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用实例"}},[t._v("#")]),t._v(" 使用实例")]),t._v(" "),s("h3",{attrs:{id:"图片懒加载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#图片懒加载"}},[t._v("#")]),t._v(" 图片懒加载")]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token style"}},[s("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n    "),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("img")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 400px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 400px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  ")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token special-attr"}},[s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("style")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),s("span",{pre:!0,attrs:{class:"token value css language-css"}},[s("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 800px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("img"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("data-src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("1.jpg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("img"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("data-src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("2.jpg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("img"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("data-src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("3.jpg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token special-attr"}},[s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("style")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),s("span",{pre:!0,attrs:{class:"token value css language-css"}},[s("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 800px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建观察器")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" observer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IntersectionObserver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("entries")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      entries"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("entry")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("entry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("intersectionRatio "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          entry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" entry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dataset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用完之后务必取消观察，否则来回进出视口会反复触发")]),t._v("\n          observer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("unobserve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("entry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 查找所有需要被观察的元素，并运用观察器")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" imgs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementsByTagName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'img'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    imgs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("imgEle")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" observer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("observe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("imgEle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  ")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br")])]),s("h3",{attrs:{id:"页面触底加载-无限滚动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#页面触底加载-无限滚动"}},[t._v("#")]),t._v(" 页面触底加载（无限滚动）")]),t._v(" "),s("p",[t._v("监听页面底部元素，如果进入视口则触发加载事件，如果没有底部元素，就需要每一次页面加入新内容时，都调用 "),s("code",[t._v("observe()")]),t._v(" 方法，对新增内容的底部元素建立观察。")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" intersectionObserver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IntersectionObserver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("entries")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果不可见，就返回")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("entries"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("intersectionRatio "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadItems")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Loaded new items'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开始观察")]),t._v("\nintersectionObserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("observe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.scrollerFooter'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])]),s("h3",{attrs:{id:"视频自动播放"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#视频自动播放"}},[t._v("#")]),t._v(" 视频自动播放")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" video "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'video'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" isPaused "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" observer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IntersectionObserver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("entries"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" observer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entries"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("entry")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("entry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("intersectionRatio "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("video"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("paused"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      video"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pause")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      isPaused "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isPaused"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      video"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("play")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      isPaused"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("threshold")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nobserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("observe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("video"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);