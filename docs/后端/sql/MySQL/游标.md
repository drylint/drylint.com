# 游标 cursor

有时，需要在检索出来的行中前进或后退一行或多行。这就是使用游标的原因。游标（cursor）是一个存储在MySQL服务器上的数据库查询，它不是一条 SELECT 语句，而是被该语句检索出来的结果集。在存储了游标之后，应用程序可以根据需要滚动或浏览其中的数据。

游标主要用于交互式应用，其中用户需要滚动屏幕上的数据，并对数据进行浏览或做出更改。

不像多数 DBMS，MySQL 游标只能用于存储过程（和函数）。

## 创建游标

游标用 DECLARE 语句创建：

```sql
CREATE PROCEDURE <存储过程名称>()
BEGIN
  DECLARE <游标名> CURSOR
  FOR
  <查询语句>;
END;
```

创建游标后，使用 `OPEN <游标名>` 打开游标：

```sql
# 在处理 OPEN 语句时执行查询，存储检索出的数据以供浏览和滚动
OPEN <游标名>;
```

游标处理完成后，应当使用如下语句关闭游标：

```sql
CLOSE <游标名>;
```

CLOSE 释放游标使用的所有内部内存和资源，因此在每个游标不再需要时都应该关闭。

在一个游标关闭后，如果没有重新打开，则不能使用它。

如果你不明确关闭游标，MySQL将会在到达 END 语句时自动关闭它。

待完善



























